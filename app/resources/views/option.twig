{% extends 'layout.twig' %} 

{% block content1 %}
<div class="text-white text-center py-5 primg">
  <img src="{{ base_url() }}\app\resources\profil\{{ user.user_img }}" class="avatar img-circle img-thumbnail rounded-circle">
  <h2>{{ user.user_name }} </h2>
</div>
<div class="container">
  <div class="row my-3">
    <div class="col-sm-12">
      <div class="list-group my-3">
        <div class="list-group-item bg-primary text-white">
          <h2 class="mb-0"><i class="fas fa-cogs pr-2"></i> Options </h2>
        </div>
      </div>
    </div>    
    <div class="col-sm-12">
      <div class="card border rounded">
        <div class="card-body">
          <h3 class="font-weight-bold">Information Personnel</h3>
          <hr>
          <form action="/modifie/info" method="post" enctype="multipart/form-data">
            <div class="form-group pt-3">
              <div class="row">
                <div class="col-sm-4">
                  <h4 class="font-weight-bold"><i class="fas fa-at pr-2"></i>Adress Email :</h4>
                </div>
                <div class="col-sm-6">
                  <h4 class="text-gray">{{ user.user_email }}</h4>
                </div>
              </div>
            </div>
            <div class="form-group">
              <div class="row">
                <div class="col-sm-4">
                  <h4 class="font-weight-bold"><i class="fas fa-user pr-2"></i>Psudonom :</h4>
                </div>
                <div class="col-sm-6">
                  <h4 class="text-gray">{{ user.user_name }}</h4>
                </div>
              </div>
            </div>
            <h3 class="font-weight-bold pt-3">Modification</h3>
            <hr>
            <label class="font-weight-bold">changer votre image de profil</label>
            <div class="form-group">
              <input name="img" type="file" class="form-control inputfile" id="imgfile" >
              <button type="button" class="btn btn-warning" id="upbtn"><i class="fas fa-cloud-upload-alt pr-2"></i> Ajouter une image de Profil </button>
              <small id="txt-file" class="text-muted">selectioner un image .jpg ou .png</small>
            </div>
            <hr>
            <button type="submit" class="btn btn-primary"><i class="fas fa-save pr-2"></i>Sauvgarder</button>
          </form>
        </div>
      </div>
    </div>    
  </div>
</div>
{% endblock %}
{% block script %}
  <script>
    const hiddenfilebtn = document.getElementById('imgfile'); 
    const filebtn = document.getElementById('upbtn');
    const text = document.getElementById('txt-file');
    filebtn.addEventListener("click", function() {
      hiddenfilebtn.click();
    });

    hiddenfilebtn.addEventListener("change", function() {
      if (hiddenfilebtn.value) {
        filebtn.innerHTML = hiddenfilebtn.value.match(
          /[\/\\]([\w\d\s\.\-\(\)]+)$/
        )[1];
      } 
    });
  </script>
{% endblock %}